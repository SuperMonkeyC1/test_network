# ======================================
# 网络连通性测试配置文件（YAML）
# 说明：
#   - 修改本文件即可生效
#   - 同时支持 Ping / TCP / UDP（按需启用）
# ======================================


# --------------------------------------
# 通用目标配置（Ping / TCP / UDP 共用）
# --------------------------------------
target:
  # 目标地址
  # 支持 IP 或域名
  # 示例：
  #   8.8.8.8
  #   171.102.130.220
  #   example.com
  #   www.google.com
  host: 171.102.130.220
  #  host: fn.smksc.top

  # 日志保存目录
  # Windows 路径建议使用正斜杠 /
  # 支持相对路径（相对于 exe / 脚本目录）
  log_dir: ./logs

  # 日志时间使用的时区
  # 常用值：
  #   Asia/Bangkok   泰国
  #   Asia/Shanghai  中国
  #   UTC            世界标准时间
  timezone: Asia/Bangkok


# --------------------------------------
# ICMP Ping 测试配置
# 说明：
#   - 使用系统 ping 命令
#   - 某些服务器 / 防火墙可能禁用 ping
# --------------------------------------
ping:
  # 是否启用 ping 测试
  enable: true

  # ping 间隔时间（秒）
  # 建议 >= 1
  interval: 1


# --------------------------------------
# TCP 端口连通性检测配置（推荐）
# 说明：
#   - 不使用 ICMP
#   - 直接测试指定端口是否可建立 TCP 连接
#   - 更贴近真实业务连通性
# --------------------------------------
tcp:
  # 是否启用 TCP 测试
  enable: true

  # 要检测的端口号
  # 常见端口：
  #   80    HTTP
  #   443   HTTPS
  #   554   RTSP（摄像头）
  #   22    SSH（不建议频繁探测）
  port: 80

  # TCP 连接超时时间（秒）
  # 超过该时间仍未连接成功则判定为失败
  timeout: 4

  # 检测间隔时间（秒）
  # 建议 >= 1
  interval: 1




# ================== 网段扫描配置说明 ==================
# networks 支持配置多个 IPv4 CIDR 网段，按顺序串行扫描
#
# ⚠️ 注意事项（非常重要）：
#
# 1️⃣ 请务必填写“网段地址”，而不是单个 IP
#    ✅ 正确示例：
#       - 192.168.1.0/24
#       - 10.0.0.0/24
#    ❌ 不推荐：
#       - 10.0.0.2/24   # 会被自动规范为 10.0.0.0/24，但容易引起误解
#
# 2️⃣ 网段规模请控制在合理范围
#    - /24  （最多 254 个 IP）👉 推荐
#    - /23  （≈ 510 个 IP）👉 勉强可接受
#    - /16  （≈ 65,534 个 IP）❌ 极易导致扫描时间过长或被判定为攻击
#
# 3️⃣ 多个网段是“串行扫描”，不是并行
#    - 设计目的：降低网络冲击，便于日志分析
#    - 若配置多个大网段，总扫描时间 = 各网段时间累加
#
# 4️⃣ 请确认扫描来源网络具备路由可达性
#    - 若本机与目标网段不在同一二层/三层网络
#    - ICMP / TCP 探测将全部失败（并非目标主机不存在）
#
# 5️⃣ 在生产网络 / 办公网络使用前，请提前沟通
#    - 大规模端口扫描可能触发：
#      • 防火墙告警
#      • IDS / IPS
#      • 交换机端口限速
#
# 6️⃣ 建议搭配 rate_limit 使用（强烈推荐）
#    - TCP 探测速率过快 ≈ 端口扫描行为
#    - 合理速率示例：0.03 ~ 0.1 秒 / 连接
#
# ======================================================
scan:
  max_hosts: 1024          # 单次允许扫描的最大 IP 数（超过直接拒绝）
  show_progress: true      # 是否显示扫描进度
  estimate_time: true      # 是否启动前估算耗时

ping_scan:
  enable: true                 # 是否启用 Ping 扫描

  # 支持多个网段，按顺序串行扫描
  # 示例
  #  networks:
  #    - 192.168.1.0/24
  #    - 192.168.2.0/24
  networks:
    - 10.0.0.0/24

  timeout: 1000                # 单次 ping 超时时间（ms）
  threads: 128                 # 并发线程数
  retry: 1                     # ping 失败重试次数
  rate_limit: 0.01             # ping 速率限制（秒），防止 ICMP 风暴

# ========================
# TCP 探测配置
# ========================
tcp_scan:
  enable: False                # 是否启用 TCP 探测 Ture or False

  # list | range | full
  # list  : 指定端口列表（默认，最安全）
  # range : 指定端口范围（如 1–1024）
  # full  : 全端口扫描（1–65535，慎用）
  mode: list

  # --- 模式 1：端口列表（默认，最安全）
  ports: [ 80, 554, 8000 ]       # 常见服务 / 摄像头端口

  # --- 模式 2：端口范围（mode=range）
  port_range:
    start: 1
    end: 1024

  # --- 模式 3：全端口（mode=full，慎用）
  # full = 1-65535
  timeout: 3                   # TCP 连接超时（秒）
  retry: 1                     # TCP 端口失败重试次数（full 模式建议 0）
  rate_limit: 0.05             # TCP 探测速率限制（秒）
